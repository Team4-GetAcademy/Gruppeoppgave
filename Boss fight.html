<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        body {
          background-repeat: no-repeat;
          background-attachment: fixed;
          background-size: cover;
        }
    </style>

</head>
<body>
    <div id="content"></div>

    <audio id="critAudio">
        <source src="Sound/Crit.mp3" type="audio/mpeg">
    </audio>

    <script>

        // ??
        let contentDiv = document.getElementById('content');
        let critAudio = document.getElementById('critAudio');

        // model
        let bossHealth = 200;
        let bossAttack = 15;
        let youHealth = 100;
        let youAttack;
        let messageWinner = null;
        let messageAttack = null;
        let messageBossAttack = null;
        let buttonState = null;
        let screen = 'swordPick';

        // view
        show();
        function show() {
            if (screen == 'swordPick') showSword();
            if (screen == 'boss') showBoss();
            if (screen == 'boss2') showBoss2();
        }

        function showSword() {
            document.body.style.backgroundImage = "url('Picture/swordBack.png')";
            contentDiv.innerHTML = `
            <img onclick="youAttack = 5;screen = 'boss';show()" src="https://cdn.shopify.com/s/files/1/2384/2133/products/lg_54681.jpg?v=1516327260" height="300px">
            <img onclick="youAttack = 10;screen = 'boss';show()" src="https://upload.wikimedia.org/wikipedia/commons/1/14/Lightsaber%2C_silver_hilt%2C_blue_blade.png" height="300px">
            <img onclick="youAttack = 50;screen = 'boss';show()" src="https://whowhatwhy.org/wp-content/uploads/2016/06/b-2.jpg" height="300px">
            `;
        }

        function showBoss() {
            document.body.style.backgroundImage = "data:image/jpeg";
            contentDiv.innerHTML = `
            <h1>${bossHealth}</h1>
            <img src="https://i.pinimg.com/originals/2f/e3/f1/2fe3f1584effc3be5855db5aefd02a98.jpg" height="400px">
            <h1>${youHealth}</h1>
            <button ${buttonState || ''} onclick="attack()">Kick ASS</button>
            <div>${messageAttack || ''}</div>
            <div>${messageBossAttack || ''}</div>
            <div>${messageWinner || ''}</div>
            `;
        }

        function showBoss2() {
            document.body.style.backgroundImage = "";
            contentDiv.innerHTML = `
            <h1>${bossHealth}</h1>
            <img src="https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/midn-flayer-stranger-things-1562960985.png" height="400px">
            <h1>${youHealth}</h1>
            <button ${buttonState || ''} onclick="attack()">Kick ASS</button>
            <div>${messageAttack || ''}</div>
            <div>${messageBossAttack || ''}</div>
            <div>${messageWinner || ''}</div>
            `;
        }

        // controller
        function attack() {
            let rngNr = Math.floor(Math.random() * 20);
            let rngBoss = Math.floor(Math.random() * 20);
            let rngUltra = 1 + Math.floor(Math.random() * 100);
            
            if (rngNr == 19){
                bossHealth = bossHealth - youAttack * 4;
                messageAttack = 'You hit with 40 dmg!';
                critAudio.play();
            } 
            else if (rngNr == 18) {
                bossHealth = bossHealth - youAttack * 2;
                messageAttack = 'You hit with 20 dmg!';
            } 
            else if(rngNr == 17){
                bossHealth = bossHealth;
                messageAttack = 'You miss!'
            } else {
                bossHealth = bossHealth - youAttack;
                messageAttack = 'You hit with 10 dmg!';
            }
            
            if (rngBoss == 19 && bossHealth > 0){
                youHealth = youHealth - bossAttack * 10;
                messageBossAttack = 'Boss hit with 150 dmg!';
            } 
            else if (rngBoss == 18 && bossHealth > 0) {
                youHealth = youHealth - bossAttack / 5;
                messageBossAttack = 'Boss hit your toe for 3 dmg!';
            } 
            else if (rngBoss == 17 && bossHealth > 0){
                youHealth = youHealth;
                messageBossAttack = 'Boss miss!'
            } else {
                youHealth = youHealth - bossAttack
                messageBossAttack = 'Boss hit with 15 dmg!';
            }
            

            if (bossHealth <= 0 && youHealth <= 0) {
                bossHealth = 0;
                youHealth = 0;
                messageWinner = 'Both died!'
                buttonState = 'disabled';
            }
            else if (bossHealth <= 0) {
                bossHealth = 0;
                messageWinner = 'You won!';
                // buttonState = 'disabled';
                screen = 'boss2';
                bossHealth = 1000;
            }
            else if (youHealth <= 0) {
                youHealth = 0;
                messageWinner = 'Boss won!';
                buttonState = 'disabled';
            }

            if (rngUltra == 1) {
                bossHealth  = bossHealth - youAttack * 900;
                messageAttack = 'Its over 9000!!!';
            }
            show();
        }

    </script>
    
</body>
</html>